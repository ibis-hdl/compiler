{
    "version": 8,
    "include": [
        "compiler.json"
    ],
    "configurePresets": [
        {
            "name": "developer-mode",
            "hidden": true,
            "cacheVariables": {
              "IBIS_DEVELOPER_MODE": "ON"
            }
        },
        {
            "name": "tool-clang-tidy",
            "description": "CMake Clang-Tidy build target",
            "hidden": true,
            "cacheVariables": {
                "CMAKE_CXX_CLANG_TIDY": "clang-tidy;--format-style=file;-p=${sourceDir}/build;--extra-arg-before=--driver-mode=clang"
            }
        },
        {
            "name": "tool-cppcheck",
            "description": "CMake CppCheck tool",
            "hidden": true,
            "cacheVariables": {
                "CMAKE_CXX_CPPCHECK": "cppcheck;--library=boost;--inline-suppr"
            }
        },
        {
            "name": "tool-iwyu-clang",
            "description": "CMake Clang based Include-What-You-Use (IWYU)",
            "hidden": true,
            "cacheVariables": {
                "CMAKE_CXX_INCLUDE_WHAT_YOU_USE": "iwyu;-Xiwyu;--mapping_file=${sourceDir}/cmake/utils/iwyu/project.imp;-Xiwyu;--comment_style=none;-Xiwyu;--transitive_includes_only;-Xiwyu;--quoted_includes_first;-Xiwyu;--cxx17ns;-Xiwyu;--verbose=2;-Xiwyu;--driver-mode=clang"
            }
        },
        {
            "name": "tool-iwyu-msvc",
            "description": "CMake Clang based Include-What-You-Use",
            "hidden": true,
            "inherits": [ "condition-windows" ],
            "cacheVariables": {
                "CMAKE_CXX_INCLUDE_WHAT_YOU_USE": "iwyu;--driver-mode=cl"
            }
        },
        {
            "name": "tool-coverage-linux",
            "description": "Code coverage using Gcc/Clang on Linux/macOS",
            "hidden": true,
            "inherits": [ "condition-linux-or-macos" ],
            "cacheVariables": {
                "ENABLE_COVERAGE": "ON",
                "CMAKE_BUILD_TYPE": "Coverage",
                "CMAKE_CXX_FLAGS_COVERAGE": "-Og -g --coverage -fkeep-inline-functions -fkeep-static-functions -fprofile-abs-path",
                "CMAKE_EXE_LINKER_FLAGS_COVERAGE": "--coverage",
                "CMAKE_SHARED_LINKER_FLAGS_COVERAGE": "--coverage",
                "CMAKE_MAP_IMPORTED_CONFIG_COVERAGE": "Coverage;Release;Debug;",
                "COVERAGE_HTML_COMMAND": ""
            }
        },
        {
            "name": "tool-sanitize-asan-ubsan",
            "description": "Sanitize Address and UndefinedBehavior using Clang/Gcc on Linux/macOS",
            "hidden": true,
            "inherits": [ "condition-linux-or-macos" ],
            "cacheVariables": {
                "CMAKE_CXX_FLAGS_SANITIZE": "-O2 -g -fsanitize=address,undefined -fno-omit-frame-pointer -fno-common -U_GLIBCXX_DEBUG -U_GLIBCXX_DEBUG_PEDANTIC -U_GLIBCXX_SANITIZE_VECTOR -U_FORTIFY_SOURCE",
                "CMAKE_MAP_IMPORTED_CONFIG_SANITIZE": "Sanitize;RelWithDebInfo;Release;Debug;"
            }
        },
        {
            "name": "libstdcxx-debug",
            "description": "GNU libstdc++ Debug Mode for GCC and Clang, also Glibc",
            "hidden": true,
            "cacheVariables": {
                "CMAKE_CXX_FLAGS_INIT": "-D_GLIBCXX_DEBUG -D_GLIBCXX_DEBUG_PEDANTIC -D_GLIBCXX_SANITIZE_VECTOR -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3"
            },
            "environment":{
                "GLIBCXX_DEBUG_MESSAGE_LENGTH": "100"
            }
        },   
        {
            "name": "libcxx-debug",
            "description": "LLVM lib++ Debug Mode for Clang",
            "hidden": true,
            "cacheVariables": {
                "CMAKE_CXX_FLAGS_INIT": "-D_LIBCPP_DEBUG=1"
            }
        },    
        {
            "name": "dev-clang-coverage",
            "displayName": "Clang-Coverage",
            "description": "Developer-Mode with Clang using coverage settings",
            "hidden": true,
            "inherits": [
                "compiler-clang-dev",
                "tool-coverage-linux"
            ]
        }
    ],
    "buildPresets": [

    ],
    "testPresets": [
        {
            "name": "dev-clang-asan-test-env",
            "displayName": "Clang sanitize environment",
            "description": "Developer-Mode with Clang Sanitize environment settings",
            "hidden": true,
            "environment":{
                "ASAN_OPTIONS": "strict_string_checks=1:detect_stack_use_after_return=1:check_initialization_order=1:strict_init_order=1:detect_leaks=1:halt_on_error=1",
                "UBSAN_OPTIONS": "print_stacktrace=1:halt_on_error=1"
            }
        }
    ],
    "workflowPresets": []    
}